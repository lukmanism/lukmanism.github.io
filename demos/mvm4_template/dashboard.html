<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Page Template</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/mvm-styles.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link href="css/simple-sidebar.css" rel="stylesheet">
    <link href="css/toggles.css" rel="stylesheet">
    <link href="css/toggles-light.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

  <div class="page_container opaque-0">
  <div class="header-notifications">
<!-- Dropdown: Notifications -->
    <div class="dropdown dropdown-custom">
      <a href="#" class="fa fa-bell fa-lg dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"></a>
      <div class="dropdown-menu dropdown-menu-right" role="menu">
        <h4 class="title">Notifications</h4>
        <ul class="list-custom">
          <li class="row"><div class="col-auto"><span class="fa fa-exclamation-triangle text-red"></span></div><div class="col-auto width300 elipsis bold">Ut enim ad minim veniam enim ad minim veniam<span class="timestamp">3 minutes ago</span></div></li>
          <li class="row"><div class="col-auto"><span class="fa fa-exclamation-triangle text-yellow"></span></div><div class="col-auto width300 elipsis bold">Sed ut perspiciatis unde omnis iste natus enim ad minim veniam<span class="timestamp">5 minutes ago</span></div></li>
          <li class="row"><div class="col-auto"><span class="fa fa-exclamation-triangle text-green"></span></div><div class="col-auto width300 elipsis bold">Nemo enim ipsam voluptatem quia voluptas enim ad minim veniam<span class="timestamp">Yesterday</span></div></li>
          <li class="row"><div class="col-auto"><span class="fa fa-exclamation-triangle"></span></div><div class="col-auto width300 elipsis bold">Neque porro quisquam est, qui dolorem enim ad minim veniam<span class="timestamp">Yesterday</span></div></li>
          <li class="row"><div class="col-auto"><span class="fa fa-ticket"></span></div><div class="col-auto width300 elipsis bold">Quis nostrud exercitation ullamco laboris enim ad minim veniam<span class="timestamp">Last Week</span></div></li>
        </ul>
      </div>
    </div>
<!-- Dropdown: Messages -->
    <div class="dropdown dropdown-custom">
      <a href="#" class="fa fa-comment fa-lg dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"></a>
      <div class="dropdown-menu dropdown-menu-right" role="menu">
        <h4 class="title">Recent Messages</h4>
        <ul class="list-custom">
          <li class="row">
            <div class="col-auto"><span class="fa fa-comment"></span></div>
            <div class="col-auto width300 elipsis bold">Ut enim ad minim veniam<span class="timestamp">3 minutes ago</span></div>
          </li>
          <li class="row read">
            <div class="col-auto"><span class="fa fa-comment"></span></div>
            <div class="col-auto width300 elipsis bold">Sed ut perspiciatis unde omnis iste natus<span class="timestamp">5 minutes ago</span></div>
          </li>
          <li class="row">
            <div class="col-auto"><span class="fa fa-envelope"></span></div>
            <div class="col-auto width300 elipsis bold">Nemo enim ipsam voluptatem quia voluptas<span class="timestamp">Yesterday</span></div>
          </li>
          <li class="row read">
            <div class="col-auto"><span class="fa fa-envelope"></span></div>
            <div class="col-auto width300 elipsis bold">Neque porro quisquam est, qui dolorem<span class="timestamp">Yesterday</span></div>
          </li>
          <li class="row">
            <div class="col-auto"><span class="fa fa-envelope-o"></span></div>
            <div class="col-auto width300 elipsis bold">Quis nostrud exercitation ullamco laboris<span class="timestamp">Last Week</span></div>
          </li>
        </ul>
      </div>
    </div>
<!-- Dropdown: Account Settings -->
    <div class="dropdown dropdown-custom">
      <a href="#" class="fa fa-user fa-lg dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"></a>
      <div class="dropdown-menu dropdown-menu-right" role="menu">
        <h4 class="title">Account Info</h4>
        <div class="row-custom">
          <div class="col-auto"><span class="profile-pic"><img src="images/profile.jpg"></span></div>
          <div class="col-auto">
            <div class="col1">Charles Bukowski</div>
            <div class="col1">Administrator</div>
          </div>                
        </div>
        
        <div class="row-custom divider"></div>
        <div class="row-custom">
          <div class="col2 uppercase">Account Type:</div>
          <div class="col-auto">Professional Version</div>                
        </div>
        <div class="row-custom">
          <div class="col2 uppercase">Account Validity:</div>
          <div class="col-auto">20/03/2012 - 21/03/2015</div>                
        </div>

        <div class="row-custom center-col top-20">
          <div class="col2"><a href="#" type="button" class="btn btn-default uppercase"><span class="fa fa-pencil"></span>Account Setting</a></div>
          <div class="col2"><a href="#" type="button" class="btn btn-default uppercase"><span class="fa fa-unlock"></span>Logout</a></div>                
        </div>
      </div>
    </div>
  </div>

  <nav>
    <div class="main-menu"><a href="#burger-menus" class="fa fa-bars fa-lg" id="burger-menus"></a></div>
    <div class="header">
        <div class="col3 header-title"><h3 class="bebas_neu">Page Title</h3></div>    
        <div class="col3 header-logo"></div>
    </div>
  </nav>


    <div id="wrapper" class="toggled">
    <div class="shadow"></div>
<!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand-active"><a href="#">Dashboard</a></li>
                <li><a href="#">Add Widget</a></li>
                <li class="sidebar-brand"><a href="#">Maps</a></li>
                <li><a href="#">Add Map</a></li>
                <li><a href="#">Settings</a></li>
                <li class="sidebar-brand"><a href="#">Reports</a></li>
                <li><a href="#">Add Report</a></li>
                <li><a href="#">Add Widget</a></li>
                <li><a href="#">Settings</a></li>
                <li class="sidebar-brand"><a href="#">Notifications</a></li>
                <li><a href="#">Alerts</a></li>
                <li><a href="#">Tickets</a></li>
                <li><a href="#">Messages</a></li>
                <li><a href="#">Settings</a></li>
                <li class="sidebar-brand"><a href="#">Control Center</a></li>
                <li><a href="#">Daily Tasks</a></li>
                <li><a href="#">History Logs</a></li>
                <li><a href="#">Settings</a></li>
                <li class="sidebar-brand"><a href="#">Help</a></li>
            </ul>
        </div>
        <!-- /#sidebar-wrapper -->

<!-- ### Start Main Page -->

<!-- Section Dashboard -->              
        <div id="page-content-wrapper" class="full-width">
          <div id="page-dashboard" class="page-container">
            <div class="row">
                <div class="col-lg-12">
                <div class="col-md-6 widget_container">
                    <div class="widget-header">
                        <div class="title">Lorem ipsum dolor sit amet</div>  
                        <div class="widget-menus hide">
                            <a href="#" class="fa fa-external-link new_window" data-type="chart-area" data-id="1"></a>
                            <a href="#" class="fa fa-trash-o"></a>
                        </div>
                        
                    </div>
                    <div class="widget" id="widget_1">
                      <div class="canvas"></div>
                    </div>                        
                </div>

                <div class="col-md-6 widget_container">
                    <div class="widget-header">
                        <div class="title">Lorem ipsum dolor sit amet</div>  
                        <div class="widget-menus hide">
                            <a href="#" class="fa fa-external-link new_window" data-type="chart-bar" data-id="2"></a>
                            <a href="#" class="fa fa-trash-o"></a>
                        </div>
                        
                    </div>
                    <div class="widget" id="widget_2">
                      <div class="canvas"></div>
                    </div>          
                </div>                        
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                <div class="col-md-6 widget_container">
                    <div class="widget-header">
                        <div class="title">Lorem ipsum dolor sit amet</div>  
                        <div class="widget-menus hide">
                            <a href="#" class="fa fa-external-link new_window" data-type="map" data-id="3"></a>
                            <a href="#" class="fa fa-trash-o"></a>
                        </div>
                        
                    </div>
                    <div class="widget" id="widget_3">
                      <div class="canvas" id="map-widget"></div>
                    </div>                        
                </div>

                <div class="col-md-6 widget_container">
                    <div class="widget-header">
                        <div class="title">Lorem ipsum dolor sit amet</div>  
                        <div class="widget-menus hide">
                            <a href="#" class="fa fa-external-link new_window" data-type="gauge" data-id="4"></a>
                            <a href="#" class="fa fa-trash-o"></a>
                        </div>
                        
                    </div>
                    <div class="widget" id="widget_4">
                      <div class="canvas"></div>
                    </div>          
                </div>                        
                </div>
              </div>   
          </div>
        </div>








<!-- ### End Main Page -->
    </div>
    </div>





    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script src="js/toggles.min.js"></script>
    <script src="js/main.js"></script>

    <!-- Dashboard Script Only -->
    <script src="js/d3.min.js"></script>
    <script src="js/ol.js" type="text/javascript"></script>

    <div id="widget_attach_1">
      <style>
        .axis path,
        .axis line {
          fill: none;
          stroke: #000;
          shape-rendering: crispEdges;
        }

        .x.axis path {
          display: none;
        }

        .line {
          fill: none;
          stroke: #d9534f;
          stroke-width: 1.5px;
        }
      </style>
      <script>
        if (null==opener){ // original window
          setTimeout(function(){
            renderAreaChart('#widget_1');
          }, 500);
        }

        function renderAreaChart(dimension){
          var canvas = $(dimension);
          var margin = {top: 20, right: 20, bottom: 30, left: 40},
              width = canvas.width() - 50,
              height = canvas.height()- 50;

          var parseDate = d3.time.format("%d-%b-%y").parse;

          var x = d3.time.scale().range([0, width]);

          var y = d3.scale.linear().range([height, 0]);

          var xAxis = d3.svg.axis().scale(x).orient("bottom");

          var yAxis = d3.svg.axis().scale(y).orient("left");

          var line = d3.svg.line().x(function(d) { return x(d.date); }).y(function(d) { return y(d.close); });

          var svg = d3.select(dimension+" .canvas").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

          var tsv = d3.tsv("temp/data2.tsv", function(error, data) {
            data.forEach(function(d) {
              d.date = parseDate(d.date);
              d.close = +d.close;
            });

            x.domain(d3.extent(data, function(d) { return d.date; }));
            y.domain([0, d3.max(data, function(d) { return d.close; })]);

            svg.append("path").datum(data).attr("class", "line").attr("d", line);

            svg.append("g").attr("class", "x axis").attr("transform", "translate(0," + height + ")").call(xAxis);

            svg.append("g").attr("class", "y axis").call(yAxis)
            .append("text").attr("transform", "rotate(-90)").attr("y", 6).attr("dy", ".71em").style("text-anchor", "end").text("Price ($)");
          });        
        }
  

      </script>
    </div>
    <div id="widget_attach_2">
      <style>
        .bar {
          fill: #5cb85c;
        }
        .bar:hover {
          fill: #cecece;
        }
        .axis {
          font: 10px sans-serif;
        }
        .axis path,
        .axis line {
          fill: none;
          stroke: #000;
          shape-rendering: crispEdges;
        }
        .x.axis path {
          display: none;
        }
      </style>
      <script type="text/javascript">
        if (null==opener){ // original window
          setTimeout(function(){
            renderBarChart('#widget_2');
          }, 500);
        }

        function renderBarChart(dimension){
          var canvas = $(dimension);
          var margin = {top: 20, right: 20, bottom: 30, left: 40},
              width = canvas.width() - 50,
              height = canvas.height()- 50;

          var x = d3.scale.ordinal().rangeRoundBands([0, width], .1);

          var y = d3.scale.linear().range([height, 0]);

          var xAxis = d3.svg.axis().scale(x).orient("bottom");

          var yAxis = d3.svg.axis().scale(y).orient("left").ticks(10, "%");

          var svg = d3.select(dimension+" .canvas").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

          d3.tsv("temp/data1.tsv", type, function(error, data) {
            x.domain(data.map(function(d) { return d.letter; }));
            y.domain([0, d3.max(data, function(d) { return d.frequency; })]);

            svg.append("g").attr("class", "x axis").attr("transform", "translate(0," + height + ")").call(xAxis);

            svg.append("g").attr("class", "y axis").call(yAxis)
            .append("text").attr("transform", "rotate(-90)").attr("y", 6).attr("dy", ".71em").style("text-anchor", "end").text("Frequency");

            svg.selectAll(".bar").data(data)
            .enter().append("rect").attr("class", "bar").attr("x", function(d) { return x(d.letter); }).attr("width", x.rangeBand()).attr("y", function(d) { return y(d.frequency); }).attr("height", function(d) { return height - y(d.frequency); });
          });
        }

        function type(d) {
          d.frequency = +d.frequency;
          return d;
        }
      </script>
    </div>

    <div id="widget_attach_3">
      <link rel="stylesheet" href="css/ol.css" type="text/css">
      <script type="text/javascript">
        if (null==opener){ // original window
          setTimeout(function(){
            renderMap('map-widget', '#widget_3');
          }, 500);
        }

        function renderMap(target, container){
          var height = $(container).height();
          if (null!=opener) {
            height = height + 24;
          } else {
            height = height;
          }

          $('#'+target).height(height); // set map height
          var map = new ol.Map({
            target: target,
            layers: [
              new ol.layer.Tile({
                source: new ol.source.OSM()
              })
            ],
            view: new ol.View({
              center: ol.proj.transform([37.41, 8.82], 'EPSG:4326', 'EPSG:3857'),
              zoom: 2
            })
          });
        }
      </script>
    </div>

    <div id="widget_attach_4">
      <script type="text/javascript" src="js/gauge.js"></script>
      <script>
        var gauges = [];

        if (null==opener){ // original window
          setTimeout(function(){
            renderGauge('#widget_4', ["speed", "fuel", "rpm", "memory1", "cpu1", "network1"]);
          }, 500);
        }
        
        function createGauge(name, label, height, min, max){
          var config = {
            size: height,
            label: label,
            min: undefined != min ? min : 0,
            max: undefined != max ? max : 100,
            minorTicks: 5
          }
          
          var range = config.max - config.min;
          config.yellowZones = [{ from: config.min + range*0.75, to: config.min + range*0.9 }];
          config.redZones = [{ from: config.min + range*0.9, to: config.max }];
          
          gauges[name] = new Gauge(name+"_gauge", config);
          gauges[name].render();
        }
        
        function updateGauges(){
          for (var key in gauges){
            var value = getRandomValue(gauges[key])
            gauges[key].redraw(value);
          }
        }
        
        function getRandomValue(gauge){
          var overflow = 0; //10;
          return gauge.config.min - overflow + (gauge.config.max - gauge.config.min + overflow*2) *  Math.random();
        }
        
        function renderGauge(target, all_gauges){
          var height = $(target).height();
          var width = $(target).width();
          var col, row, margin_y, square;

          if(all_gauges.length == 1) // 1*1
            col = 1, row = 1;

          if(all_gauges.length == 2) // 2*1
            col = 2, row = 1;

          if(all_gauges.length == 3) // 3*1
            col = 3, row = 1;

          if(all_gauges.length == 4) // 2*2
            col = 2, row = 2;

          if(all_gauges.length >= 5) // 3*2, max six gauges per widget
            col = 3, row = 2;

          if((width/ col) < (height/ row)){ // get the smallest value
            square = (width/ col);
          } else {
            square = (height/ row);
          }

          margin_y = ((height - (square * row))/2) + 10;
          $(".canvas", $(target)).css('margin-top', margin_y);
          $.each(all_gauges, function(x, y){
            $(".canvas", $(target)).append('<span id="'+y+'_gauge" class="gauge_container col'+col+'"></span>');
            createGauge(y, y, square);
          });
          setInterval(updateGauges, 5000);
        }        
      </script>      
    </div>

  </body>
</html>